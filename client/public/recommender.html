<!--RECOMMENDER PAGE-->
<!DOCTYPE html>
<html lang="en">

<!--Javascript for template header and footer-->
<script type=module src=./js/head-foot.js></script>

<!--Tab Header Information-->    
<head>
    <meta name="viewport" content=""width=device-width, initial-scale="1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./css/default.css">
    <link rel="stylesheet" href="./css/recommender.css">
    <link rel="stylesheet" href="./css/card.css">
    <title> Arcadia</title>
</head>

<body onload="populateGenresGrid()">
  <!--This div wraps the entire page-->
  <div id="wrap">
    <!--Header and Navigation Bar-->
    <my-header></my-header>

    <div class="content">

    <h2 class="gameGenHeader">Game Recommender</h2>
    
    <div class="container">
      <div id="genre-selection-container">
        <p>What genres are you interested in? Select your top 3 favorites:</p>
        <div id="genres-grid">
          <!-- Genre cards will be populated here by JavaScript -->
        </div>
        <button id="continue-button" disabled>Continue</button>
      </div>
      <div id="results-container" style="display: none;">
        <!-- Game recommendations will be displayed here -->
      </div>
    </div>
    
    </div>

    <!--Footer -->
    <my-footer></my-footer>
    
  </div>
</body>
  <!--Javascript for icons-->
  <script type=module src=https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js></script>
  <script nomodule src=https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js></script>
  <script src="./js/query.js"></script>
  <script src="./js/recommend.js"></script>
  <script>
    continueButton.addEventListener("click", async () => {
    // Hide genre selection container
    document.getElementById("genre-selection-container").style.display = "none";
  
    // Show results container
    const resultsContainer = document.getElementById("results-container");
    resultsContainer.style.display = "flex";
  
    // Create containers for each genre and fetch recommended games
    for (const genreId of selectedGenres) {
      const genre = gameGenres.find((g) => g.id === parseInt(genreId));
      const genreContainer = document.createElement("div");
      genreContainer.className = "genre-results-container";
  
      const genreTitle = document.createElement("h2");
      genreTitle.textContent = genre.name;
      genreContainer.appendChild(genreTitle);
  
      const genreGamesContainer = document.createElement("div");
      genreGamesContainer.className = "genre-games-container";
      genreContainer.appendChild(genreGamesContainer);
  
      resultsContainer.appendChild(genreContainer);
      await genreGames(genre, genreGamesContainer, 6, "mini");
    }
  });
  </script>
</html>